!function(){"use strict";function a(a,b){return{restrict:"A",require:"ngModel",scope:{onDateSelect:"&",onDateChanged:"&",isMediaCb:"&"},link:function(c,d,e,f){var g,h,i,j,k,l,m=e.onDateSelect,n=e.onDateChanged,o="true"===e.isCached?!0:!1,p="true"===e.isPreload?!0:!1,q="true"===e.isCloseBackdrop?!0:!1,r="true"===e.isCloseOnSelect?!0:!1,s="true"===e.isTimestamp?!0:!1,t=e.modalTemplate||"ionic-datepicker-modal",u=e.modalAnimation||"slide-in-up",v="true"===e.mondayFirst?!0:!1,w=e.excludeWeekday?e.excludeWeekday.split(","):[];c.value=null,c.currentMonth="",c.currentYear="",c.dayList=[],c.dayRows=[0,7,14,21,28,35],c.dayCols=[0,1,2,3,4,5,6],c.disabledDates=[],c.disableToday=!1,c.weekNames=e.weekNames?e.weekNames.split(","):["So","Mo","Tu","We","Th","Fr","Sa"],c.monthNames=e.monthNames?e.monthNames.split(","):["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c.dateFormat=e.dateFormat||"MM/dd/yyyy",c.ui={modalTitle:e.modalTitle||"Select a Date",selectButton:e.selectButton||"Set",cancelButton:e.cancelButton||"Cancel",todayButton:e.todayButton||"Today",btnStyle:e.btnStyle||"clear",btnStyleCancel:e.btnStyleCancel,btnStyleToday:e.btnStyleToday,btnStyleSelect:e.btnStyleSelect,btnClass:e.btnClass||"dark",btnClassNav:e.btnClassNav||"",headerFooterClass:e.headerFooterClass||"stable",disableReset:"true"!==e.disableReset?!1:!0,disableToday:"true"!==e.disableToday?!1:!0,modalClass:e.modalClass||"",modalStyle:e.modalStyle||"",colorSelected:e.colorSelected||"#AAAAAA",colorDisabled:e.colorDisabled||"#AAAAAA",colorToday:e.colorToday||"#AAAAAA"},c.ui.btnClassNav||(c.ui.btnClassNav=c.ui.headerFooterClass),c.ui.headerFooterClass="bar-"+c.ui.headerFooterClass,c.isMediaCb&&!c.ui.modalStyle&&(c.ui.modalStyle="isMediaCb( { mediaQuery: 'sm-portrait'} ) && {'width': '100%', 'left': '0%','right': '0%','height': '450px','top': '60px','bottom': '5%'} || isMediaCb( { mediaQuery: 'sm-landscape' } ) &&  {'width': 'auto','left': '20%','right': '20%','height': '100%','top': '0%','bottom': '0%'} || isMediaCb( { mediaQuery: 'md-landscape+lg-landscape' } ) && {'width': 'auto','left': '35%','right': '35%','height': 'auto','top': '10%','bottom': '10%'} || isMediaCb( { mediaQuery: 'md-portrait+lg-portrait' } ) && { 'width': 'auto','left': '28%','right': '28%','height': '50%','top': '20%','bottom': '30%'}"),c.enableDatesMin={epoch:0,year:0,isSet:!1},c.enableDatesMax={epoch:0,year:0,isSet:!1};var x=function(a){k=a},y=function(a){j=E(a),j&&(i&&i>j?(I(i),H(j)):I(j))},z=function(a){i=E(a),i&&(j&&i>j?(I(i),H(j)):H(i))},A=function(a){c.disabledDates=[],l=a?a.split(","):[],G(),h=null,L(g),K(g)&&M()};e.$observe("startDate",x),e.$observe("maxDate",y),e.$observe("minDate",z),e.$observe("excludeDate",A),f.$render=function(){c.value=f.$viewValue};var B=function(a){var d,e=f.$viewValue;d=a?null:s?c.selectedDateFull.getTime():b("date")(c.selectedDateFull,c.dateFormat),f.$setViewValue(d),f.$render(),c.closeModal(),m&&d!==e&&c.onDateSelect({newVal:d,oldVal:e})},C=function(a){var b=a||new Date;return b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b},D=function(a){var b=c.dateFormat.toLowerCase(),d=b.split(b[2]),e=a.split(a[2]),f=d.indexOf("mm"),g=d.indexOf("dd"),h=d.indexOf("yyyy"),i=parseInt(e[f]),j=new Date(e[h],i-1,e[g]);return C(j)},E=function(a){function b(){switch(h||(f=-1*f),g){case"day":d.setDate(d.getDate()+f);break;case"week":d.setDate(d.getDate()+7*f);break;case"month":d.setMonth(d.getMonth()+f);break;case"year":d.setYear(d.getFullYear()+f)}}function c(b){var c=-1,d=-1;g=b,h=a.indexOf(b+"-")>0||a.indexOf(b+"s-")>0?!1:!0,c=a.indexOf("and"),d=a.indexOf(b),c>-1&&d>-1&&(f=parseInt(a.substring(c+3,d+1)),e=a.substring(0,c))}var d;if(!a)return d;a=a.replace(/\s/g,"").toLowerCase();var e,f,g,h;a.indexOf("day")>0?c("day"):a.indexOf("week")>0?c("week"):a.indexOf("month")>0?c("month"):a.indexOf("year")>0?c("year"):e=a;var i=parseInt(e);if(0/0!==i&&i>1e4)d=C(new Date(i));else switch(e){case"now":d=C();break;case"now-first":d=C(),d.setDate(1);break;case"now-last":d=C(),d.setMonth(d.getMonth()+1),d.setDate(0);break;case"now-prev":d=C(),d.setMonth(d.getMonth()-1),d.setDate(1);break;case"now-next":d=C(),d.setMonth(d.getMonth()+2),d.setDate(0);break;default:d=D(a)}return"Invalid Date"!=d?(g+f&&b(),d):void 0};if(g=C(),h=angular.copy(g),c.selectedDateFull=g,c.selectedDateString=g.toString(),c.todayDate=angular.copy(g),c.todayDateString=g.toString(),v){var F=c.weekNames.shift();c.weekNames.push(F)}var G=function(){if(l&&l.length>0){var a;angular.forEach(l,function(b){"number"==typeof b&&(b=b.toString()),a=E(b),a&&c.disabledDates.push(a.getTime())})}},H=function(a){c.enableDatesMin.isSet=!0,c.enableDatesMin.epoch=a.getTime(),c.enableDatesMin.year=angular.copy(a),c.enableDatesMin.year.setYear(a.getFullYear()+1),c.todayDate<a&&(c.disableToday=!0)},I=function(a){c.enableDatesMax.isSet=!0,c.enableDatesMax.epoch=a.getTime(),c.enableDatesMax.year=angular.copy(a),c.enableDatesMax.year.setYear(a.getFullYear()-1),c.todayDate>a&&(c.disableToday=!0)},J=function(){(i||j)&&(c.prevMonthDisable=!1,c.nextMonthDisable=!1,c.prevYearDisable=!1,c.nextYearDisable=!1,i&&(c.enableDatesMin.epoch>=c.currentMonthFirstDayEpoch&&(c.prevMonthDisable=!0),c.enableDatesMin.year>c.selectedDateFull&&(c.prevYearDisable=!0)),j&&(c.enableDatesMax.epoch<=c.currentMonthLastDayEpoch&&(c.nextMonthDisable=!0),c.enableDatesMax.year<c.selectedDateFull&&(c.nextYearDisable=!0)))},K=function(a){var b=a.getTime(),d=!1;return w&&w.length>0&&(d=w.indexOf(a.getDay().toString())>-1),d||c.disabledDates.indexOf(b)>-1||c.enableDatesMin.isSet&&c.enableDatesMin.epoch>b||c.enableDatesMax.isSet&&c.enableDatesMax.epoch<b},L=function(a){"string"==typeof a&&(a=D(a)),C(a);var b=a.getDate();c.selectedDateString=new Date(a).toString(),g=angular.copy(a);var d=new Date(a.getFullYear(),a.getMonth(),1).getDate(),e=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();c.currentMonthFirstDayEpoch=new Date(a.getFullYear(),a.getMonth(),d).getTime(),c.currentMonthLastDayEpoch=new Date(a.getFullYear(),a.getMonth(),e).getTime(),c.dayList=[];for(var f=d;e>=f;f++){var h=C(new Date(a.getFullYear(),a.getMonth(),f)),i=K(h);c.dayList.push({date:h.getDate(),month:h.getMonth(),year:h.getFullYear(),day:h.getDay(),dateString:h.toString(),dateDisabled:i}),h.getDate()===b&&N(c.dayList[c.dayList.length-1])}J();var j=c.dayList[0].day-+v;j=0>j?6:j;for(var k=0;j>k;k++)c.dayList.unshift({});c.currentMonth=c.monthNames[a.getMonth()],c.currentYear=a.getFullYear()},M=function(){for(var a=-1,b=c.selectedDateFull.getDate(),d=0;c.dayList.length>d;d++)c.dayList[d].date&&!c.dayList[d].dateDisabled&&(-1===a&&(a=d),Math.abs(b-c.dayList[d].date)<Math.abs(b-c.dayList[a].date)&&(a=d));a>-1&&(g.setDate(c.dayList[a].date),c.selectedDateString=g.toString(),c.selectedDateFull=new Date(g.toString()))},N=function(a){a&&0!==Object.keys(a).length&&a.dateString!==(h&&h.toString())&&(c.selectedDateString=a.dateString,c.selectedDateFull=new Date(a.dateString),h=angular.copy(c.selectedDateFull),n&&c.onDateChanged({day:c.selectedDateFull.getDate(),month:c.selectedDateFull.getMonth()+1,year:c.selectedDateFull.getFullYear()}))};c.setPrevYear=function(){c.prevYearDisable||(g.setDate(c.selectedDateFull.getDate()),g.setYear(g.getFullYear()-1),L(g),K(g)&&M())},c.setNextYear=function(){c.nextYearDisable||(g.setDate(c.selectedDateFull.getDate()),g.setYear(g.getFullYear()+1),L(g),K(g)&&M())},c.setPrevMonth=function(){c.prevMonthDisable||(g.setDate(c.selectedDateFull.getDate()),g.setMonth(g.getMonth()-1),L(g),K(g)&&M())},c.setNextMonth=function(){c.nextMonthDisable||(g.setDate(c.selectedDateFull.getDate()),g.setMonth(g.getMonth()+1),L(g),K(g)&&M())},c.dateSelected=function(a){N(a),r&&B()},c.setToday=function(){c.todayDateString!==c.selectedDateString&&(g=C(),L(g))},c.selectDate=function(){B()},c.setEmpty=function(){B(!0)},c.closeModal=function(){c.modal&&(o?c.modal.hide().then(function(){}):c.modal.remove().then(function(){c.modal=null}))},c.showModal=function(){c.modal&&c.modal.show()};var O=function(){c.modal?c.showModal():a.fromTemplateUrl(t+".html",{scope:c,backdropClickToClose:q,hardwareBackButtonClose:!1,animation:u}).then(function(a){c.modal=a,c.showModal()})};p&&a.fromTemplateUrl(t+".html",{scope:c,backdropClickToClose:q,hardwareBackButtonClose:!1,animation:u}).then(function(a){c.modal=a}),c.$on("$destroy",function(){c.modal&&(c.modal.remove(),c.modal=null)}),d.on("click",function(){var a;"undefined"!=typeof c.value&&(s="number"==typeof c.value?!0:!1),a=c.value?s?c.value.toString():c.value:k;var b=E(a);b?(L(b),K(g)&&M()):L(C()),O()})}}}angular.module("ionic-datepicker",["ionic"]),angular.module("ionic-datepicker").directive("modalDate",a),a.$inject=["$ionicModal","$filter"]}();