"use strict";function SimplePubSub(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,c){return angular.forEach(a[b],function(a){a.call(null,c)}),this}}}angular.module("tabSlideBox",[]).directive("onFinishRender",function(a){return{restrict:"A",link:function(b){b.$last===!0&&a(function(){b.$emit("ngRepeatFinished")})}}}).directive("tabSlideBox",["$timeout","$window","$ionicSlideBoxDelegate","$ionicScrollDelegate",function($timeout,$window,$ionicSlideBoxDelegate,$ionicScrollDelegate){return{restrict:"A, E, C",link:function(a,b,c){function d(){{var a=angular.element(g.querySelector(".tsb-icons")),b=a.find("a"),d=a[0].querySelector(".tsb-ic-wrp"),f=b.length;d.querySelector(".scroll")}angular.forEach(b,function(a,b){var c=angular.element(a);c.on("click",function(){j.slide(b)}),c.attr("icon-off")&&c.attr("class",c.attr("icon-off"))});var h=c.tab;("undefined"==typeof c.tab||h>=f||0>h)&&(h=Math.floor(b.length/2)),0==h&&e(0),$timeout(function(){j.slide(h)},0)}function e(a){var b=angular.element(g.querySelector(".tsb-icons")),c=b.find("a"),d=b[0].querySelector(".tsb-ic-wrp"),e=(c.length,d.querySelector(".scroll")),h=b[0].offsetWidth/2,i=angular.element(c[a]),j=angular.element(b[0].querySelector(".active"));if(i&&i.length){var l=i[0].offsetWidth,m=i[0].offsetLeft;j.attr("icon-off")?j.attr("class",j.attr("icon-off")):j.removeClass("active"),i.attr("icon-on")&&i.attr("class",i.attr("icon-on")),i.addClass("active");var n=h-m-l/2+5;if(e){var o=d.offsetWidth,p=Math.abs(f(e.style.webkitTransform)),q=100,r=40;(m+l+r>p+o||p>m-q)&&(n>0&&(n=0),k.scrollTo(Math.abs(n),0,!0))}else{var n=h-m-l/2+5+"px";d.style.webkitTransform="translate3d("+n+",0,0)"}}}function f(a){return a=a.replace("translate3d(",""),a=a.replace("translate(",""),parseInt(a)}var g=b[0],h=b;h.addClass("tabbed-slidebox"),"bottom"===c.tabsPosition&&h.addClass("btm");var i=g.querySelector(".slider").getAttribute("delegate-handle"),j=$ionicSlideBoxDelegate;i&&(j=j.$getByHandle(i));var k=$ionicScrollDelegate;i&&(k=k.$getByHandle(i));var l=a.events;l.on("slideChange",function(a){e(a.index)}),l.on("ngRepeatFinished",function(){d()}),d()},controller:function($scope,$attrs,$element){$scope.events=new SimplePubSub,$scope.slideHasChanged=function(index){$scope.events.trigger("slideChange",{index:index}),$timeout(function(){$scope.onSlideMove&&$scope.onSlideMove({index:eval(index)})},100)},$scope.$on("ngRepeatFinished",function(a){$scope.events.trigger("ngRepeatFinished",{event:a})})}}}]);